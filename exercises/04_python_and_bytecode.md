# Python for Linguists 2023

## 4. Python code and Bytecode

Effort profile: `(‚ñÅ‚ñÅ‚ñÅ‚ñÅ‚ñÇ‚ñÇ‚ñÅ‚ñÇ‚ñÇ)` 


----

ü¶â **_This entire section is OPTIONAL!_**

----



**4.1.** Write Python code that assigns one string to one variable, another string to another variable, and then prints their concatenation.

**4.2.** Python code is itself text, hence you can also, within a Python program, create a string that contains Python code. Create such a string containing the block of code you wrote for the previous exercise, and assign it to a variable `my_python_code`. (Do you remember how to create a multi-line string?)

**4.3.** One would not normally assign Python code to a string, but doing so lets us illustrate the inner workings of Python, _within Python_. Execute the following code and inspect the resulting variable `my_bytecode` to see (a representation of) the _compiled code_:
```python
my_bytecode = compile(my_python_code, filename='<none>', mode='exec').co_code
```

**4.4.** The variable `my_bytecode` now contains a 'bytes' object (notice the little `b`-prefix?),meaning a sequence of bytes. Each byte is 8 bits ('binary digits') which together can encode any number between 0 and 255 (why is this the upper bound?). Except, the 'bytes' representation can be a bit cryptic at first... The following code shows the plain sequence of numbers it represents (we learn about the `*` symbol later, it basically splits the bytes sequence into the individual bytes, feeding each to `print` separately):

```python
print(*my_bytecode)
```

**4.5.** ‚≠ê Let's demystify the original string representation of `my_bytecode`. Bytes which correspond to a 'printable _ASCII_ character' (e.g., see [this list](https://theasciicode.com.ar/)) are simply shown as that character (e.g., `d` is the 100th character in the `ascii` character list, so it represents the number 100). Other bytes are represented in _hexadecimal_ (base-16), indicated by the `\x` prefix, e.g., `\x17` (meaning `1*16 + 7*1`) represents the number 23. Compare the original 'bytes' representation of `my_bytecode` to the list of integers to verify that they match.

**4.6.** ‚≠ê Execute the following code to show the _binary_ representation of each byte, for instance, `d`, representing `100`, is `00110100` in binary (meaning `0*256 + 0*128 + 1*64 + 1*32 + 0*16 + 0*8 + 1*4 + 0*2 + 0*1`). Compare the new binary representations to the list of integers again, to verify that they correspond. Note how this code uses a format string `f'...'` with `08b` meaning a 0-padded, 8-bit representation. (The `for`-construction will be explained later.)

```python
print(*(f'{b:08b}' for b in my_bytecode))
```

**4.7.** But what does each byte in the generated Bytecode represent? The `dis` module can be used to 'disassemble' the bytecode into a (slightly) more human-readable format. It shows the basic Bytecode commands into which your Python code was translated, each command prefixed by the 'offset' of the byte in the original string (e.g., `6 STORE_NAME` means the 6th byte of `my_bytecode` represents the `STORE_NAME` operation). Hence the name 'Bytecode': basic commands are represented by bytes. By inspecting the output, which command is represented by the byte `d` (i.e., the number 100 in decimal, or `00110100` in binary)?

```python
import dis

dis.dis(my_bytecode)
```

**4.8.** ‚≠ê Bytecode is created by compiling Python code. What happens next? What is the relation between Python code, Bytecode, and the ultimate Machine code instructions ultimately sent to the computer's central processing unit? 

**4.9.** ‚≠ê In this short section you learned a bit about Python's inner workings, but also that the same information can be 'encoded' in multiple ways (ascii, hexadecimal, decimal, binary...). What might be the relevance of this for computational linguistics in particular? Would ASCII-encoding be sufficient for the alphabets of the world? (We learn a bit more about encodings later.)




-------

**_The homework exercises for week 2 end here (don't forget to submit those marked by '‚úâÔ∏è'!)._**

-------

